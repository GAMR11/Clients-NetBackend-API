# Client API - Sistema de GestiÃ³n de Clientes

API RESTful desarrollada con **ASP.NET Core 8.0** para la gestiÃ³n de clientes, con integraciÃ³n de APIs externas (JSONPlaceholder).

---

## ğŸ“‹ Tabla de Contenidos

- [CaracterÃ­sticas](#caracterÃ­sticas)
- [TecnologÃ­as](#tecnologÃ­as)
- [Requisitos Previos](#requisitos-previos)
- [InstalaciÃ³n](#instalaciÃ³n)
- [ConfiguraciÃ³n](#configuraciÃ³n)
- [EjecuciÃ³n](#ejecuciÃ³n)
- [Endpoints Disponibles](#endpoints-disponibles)
- [Estructura del Proyecto](#estructura-del-proyecto)
- [Arquitectura](#arquitectura)
- [Ejemplos de Uso](#ejemplos-de-uso)
- [Autor](#autor)

---

## âœ¨ CaracterÃ­sticas

- âœ… **CRUD Completo** de clientes bancarios
- âœ… **Entity Framework Core** con MySQL
- âœ… **Arquitectura en Capas** (Controllers, Services, Data, DTOs)
- âœ… **InyecciÃ³n de Dependencias**
- âœ… **Validaciones** con Data Annotations
- âœ… **Logging** integrado
- âœ… **CORS** configurado para frontend
- âœ… **Swagger/OpenAPI** para documentaciÃ³n interactiva
- âœ… **Consumo de APIs Externas**:
  - JSONPlaceholder (usuarios ficticios)
- âœ… **Manejo de Errores** centralizado
- âœ… **Async/Await** para operaciones asÃ­ncronas

---

## ğŸ› ï¸ TecnologÃ­as

- **Framework**: ASP.NET Core 8.0
- **Lenguaje**: C# 12
- **ORM**: Entity Framework Core 8.0
- **Base de Datos**: MySQL
- **DocumentaciÃ³n**: Swagger/OpenAPI
- **Logging**: Microsoft.Extensions.Logging
- **HTTP Client**: HttpClientFactory

### Paquetes NuGet Principales

```xml
<PackageReference Include="Pomelo.EntityFrameworkCore.MySql" Version="8.0.11" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="8.0.11" />
<PackageReference Include="Swashbuckle.AspNetCore" Version="6.5.0" />
```

---

## ğŸ“¦ Requisitos Previos

- [.NET SDK 8.0 o superior](https://dotnet.microsoft.com/download)
- Editor de cÃ³digo (VS Code)
- Git (opcional)

---

## ğŸš€ InstalaciÃ³n

### 1. Clonar el repositorio

```bash
git clone https://github.com/GAMR11/BankClientAPI.git
cd BankClientAPI
```

### 2. Restaurar dependencias

```bash
dotnet restore
```

### 3. La base de datos se crearÃ¡ automÃ¡ticamente al ejecutar la aplicaciÃ³n

---

## âš™ï¸ ConfiguraciÃ³n

### appsettings.json

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=127.0.0.1;Database=bankclients;User=root;Password=;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Urls": "http://localhost:5000"
}
```

### CORS

El API estÃ¡ configurado para aceptar peticiones desde:
- `http://localhost:4200` (Angular development server)

Para modificar, edita `Program.cs`:

```csharp
policy.WithOrigins("http://localhost:4200")
```

---

## â–¶ï¸ EjecuciÃ³n

### Modo Desarrollo

```bash
dotnet run
```

La API estarÃ¡ disponible en:
- **API**: http://localhost:5000
- **Swagger UI**: http://localhost:5000/swagger

### Modo ProducciÃ³n

```bash
dotnet run --configuration Release
```

---

## ğŸ“¡ Endpoints Disponibles

### ğŸ§‘â€ğŸ’¼ Clientes

| MÃ©todo | Endpoint | DescripciÃ³n |
|--------|----------|-------------|
| `GET` | `/api/clients` | Obtener todos los clientes activos |
| `GET` | `/api/clients/{id}` | Obtener cliente por ID |
| `POST` | `/api/clients` | Crear nuevo cliente |
| `PUT` | `/api/clients/{id}` | Actualizar cliente |
| `DELETE` | `/api/clients/{id}` | Desactivar cliente (soft delete) |
| `GET` | `/api/clients/search?term={term}` | Buscar clientes por nombre o email |

### ğŸ‘¥ Usuarios Externos (JSONPlaceholder)

| MÃ©todo | Endpoint | DescripciÃ³n |
|--------|----------|-------------|
| `GET` | `/api/externalusers` | Obtener usuarios de API externa |
| `GET` | `/api/externalusers/{id}` | Obtener usuario especÃ­fico |

---

## ğŸ“ Estructura del Proyecto

```
BankClientAPI/
â”‚
â”œâ”€â”€ Controllers/
â”‚   â”œâ”€â”€ ClientsController.cs          # CRUD de clientes
â”‚   â”œâ”€â”€ ExternalUsersController.cs    # API JSONPlaceholder
â”‚
â”œâ”€â”€ Data/
â”‚   â””â”€â”€ AppDbContext.cs               # Contexto de Entity Framework
â”‚
â”œâ”€â”€ DTOs/
â”‚   â””â”€â”€ ClientDTOs.cs                 # Data Transfer Objects
â”‚       â”œâ”€â”€ CreateClientDto
â”‚       â”œâ”€â”€ UpdateClientDto
â”‚       â”œâ”€â”€ ClientResponseDto
â”‚       â”œâ”€â”€ ExternalUserDto
â”‚
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ Client.cs                     # Modelo de datos (Entidad)
â”‚
â”œâ”€â”€ Services/
â”‚   â””â”€â”€ ExternalApiService.cs         # Consumo de APIs externas
â”‚       â””â”€â”€ IExternalApiService       # Interface del servicio
â”‚
â”œâ”€â”€ Program.cs                        # ConfiguraciÃ³n principal
â”œâ”€â”€ appsettings.json                  # ConfiguraciÃ³n de la app
```

---

## ğŸ—ï¸ Arquitectura

### PatrÃ³n de Capas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controllers Layer           â”‚  â† Maneja HTTP requests/responses
â”‚    (ClientsController, etc.)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Services Layer             â”‚  â† LÃ³gica de negocio
â”‚    (ExternalApiService)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Layer                 â”‚  â† Acceso a datos
â”‚    (AppDbContext, EF Core)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Database                   â”‚  â† MySQL
â”‚                                     â”‚ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dependency Injection

Todos los servicios se registran en `Program.cs`:

```csharp
// DbContext
builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlite(connectionString));

// External API Service
builder.Services.AddHttpClient<IExternalApiService, ExternalApiService>();

// Controllers
builder.Services.AddControllers();
```

---

## ğŸ“ Ejemplos de Uso

### 1. Crear un Cliente

**Request:**
```http
POST /api/clients
Content-Type: application/json

{
  "firstName": "Carlos",
  "lastName": "RodrÃ­guez",
  "email": "carlos@email.com",
  "phoneNumber": "0987654321",
  "address": "Av. 6 de Diciembre, Quito",
  "accountType": "Ahorros",
  "balance": 5000.00
}
```

**Response:** `201 Created`
```json
{
  "id": 3,
  "firstName": "Carlos",
  "lastName": "RodrÃ­guez",
  "fullName": "Carlos RodrÃ­guez",
  "email": "carlos@email.com",
  "phoneNumber": "0987654321",
  "address": "Av. 6 de Diciembre, Quito",
  "accountType": "Ahorros",
  "balance": 5000.00,
  "createdAt": "2024-12-28T10:30:00Z",
  "isActive": true
}
```

### 2. Obtener Todos los Clientes

**Request:**
```http
GET /api/clients
```

**Response:** `200 OK`
```json
[
  {
    "id": 1,
    "firstName": "Juan",
    "lastName": "PÃ©rez",
    "fullName": "Juan PÃ©rez",
    "email": "juan.perez@email.com",
    "phoneNumber": "0999123456",
    "address": "Av. Amazonas y Naciones Unidas, Quito",
    "accountType": "Ahorros",
    "balance": 5000.00,
    "createdAt": "2024-12-28T08:00:00Z",
    "isActive": true
  },
  {
    "id": 2,
    "firstName": "MarÃ­a",
    "lastName": "GonzÃ¡lez",
    "fullName": "MarÃ­a GonzÃ¡lez",
    "email": "maria.gonzalez@email.com",
    "phoneNumber": "0998765432",
    "address": "Calle 10 de Agosto, Quito",
    "accountType": "Corriente",
    "balance": 12500.50,
    "createdAt": "2024-12-28T08:00:00Z",
    "isActive": true
  }
]
```

### 3. Buscar Clientes

**Request:**
```http
GET /api/clients/search?term=juan
```

**Response:** `200 OK`
```json
[
  {
    "id": 1,
    "firstName": "Juan",
    "lastName": "PÃ©rez",
    "fullName": "Juan PÃ©rez",
    "email": "juan.perez@email.com",
    ...
  }
]
```

### 4. Actualizar Cliente

**Request:**
```http
PUT /api/clients/1
Content-Type: application/json

{
  "balance": 6000.00,
  "phoneNumber": "0999999999"
}
```

**Response:** `204 No Content`

### 5. Obtener Usuarios Externos

**Request:**
```http
GET /api/externalusers
```

**Response:** `200 OK`
```json
[
  {
    "id": 1,
    "name": "Leanne Graham",
    "email": "Sincere@april.biz",
    "phone": "1-770-736-8031 x56442",
    "address": {
      "street": "Kulas Light",
      "city": "Gwenborough"
    }
  },
  ...
]
```

---

## ğŸ”’ Validaciones

### Modelo Client

- `FirstName`: Requerido, mÃ¡ximo 100 caracteres
- `LastName`: Requerido, mÃ¡ximo 100 caracteres
- `Email`: Requerido, formato vÃ¡lido, Ãºnico en BD
- `PhoneNumber`: Requerido, formato vÃ¡lido
- `AccountType`: Requerido
- `Balance`: Requerido, debe ser â‰¥ 0

### Manejo de Errores

| CÃ³digo | DescripciÃ³n |
|--------|-------------|
| `200 OK` | OperaciÃ³n exitosa |
| `201 Created` | Recurso creado exitosamente |
| `204 No Content` | ActualizaciÃ³n/eliminaciÃ³n exitosa |
| `400 Bad Request` | ValidaciÃ³n fallida o datos incorrectos |
| `404 Not Found` | Recurso no encontrado |
| `502 Bad Gateway` | Error al conectar con API externa |

---

## ğŸ—„ï¸ Base de Datos

### Modelo de Datos

**Tabla: Clients**

| Campo | Tipo | DescripciÃ³n |
|-------|------|-------------|
| Id | int | Primary Key (auto-incremental) |
| FirstName | string(100) | Nombre del cliente |
| LastName | string(100) | Apellido del cliente |
| Email | string(150) | Email Ãºnico |
| PhoneNumber | string(20) | TelÃ©fono |
| Address | string(200) | DirecciÃ³n (opcional) |
| AccountType | string(50) | Tipo de cuenta |
| Balance | decimal(18,2) | Saldo de la cuenta |
| CreatedAt | datetime | Fecha de creaciÃ³n |
| IsActive | bool | Estado del cliente |

### Datos Iniciales (Seed Data)

El sistema incluye 2 clientes de prueba:
1. Juan PÃ©rez - Cuenta de Ahorros
2. MarÃ­a GonzÃ¡lez - Cuenta Corriente

---

## ğŸ§ª Testing

### Pruebas con Swagger

1. Ejecuta la aplicaciÃ³n: `dotnet run`
2. Abre: http://localhost:5000/swagger
3. Prueba cada endpoint desde la interfaz interactiva

### Pruebas con cURL

```bash
# Obtener todos los clientes
curl http://localhost:5000/api/clients

# Crear cliente
curl -X POST http://localhost:5000/api/clients \
  -H "Content-Type: application/json" \
  -d '{
    "firstName": "Test",
    "lastName": "User",
    "email": "test@email.com",
    "phoneNumber": "0999999999",
    "accountType": "Ahorros",
    "balance": 1000.00
  }'

# Obtener PokÃ©mon
curl http://localhost:5000/api/pokemons/ditto
```

---

## ğŸš€ Despliegue

### Publicar para ProducciÃ³n

```bash
dotnet publish -c Release -o ./publish
```

### Docker (Opcional)

```dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:8.0
WORKDIR /app
COPY ./publish .
EXPOSE 5000
ENTRYPOINT ["dotnet", "BankClientAPI.dll"]
```

---

## ğŸ“š Conceptos Clave Implementados

- âœ… **RESTful API Design**
- âœ… **Dependency Injection (DI)**
- âœ… **Entity Framework Core (ORM)**
- âœ… **Async/Await Pattern**
- âœ… **DTO Pattern**
- âœ… **Repository Pattern** (via DbContext)
- âœ… **CORS Configuration**
- âœ… **Error Handling**
- âœ… **Logging**
- âœ… **Data Validation**
- âœ… **HTTP Client Best Practices**

---

## ğŸ“– Recursos de Aprendizaje

- [DocumentaciÃ³n oficial de ASP.NET Core](https://docs.microsoft.com/aspnet/core)
- [Entity Framework Core](https://docs.microsoft.com/ef/core)
- [C# Documentation](https://docs.microsoft.com/dotnet/csharp)
- [RESTful API Design](https://restfulapi.net)

---

## ğŸ‘¨â€ğŸ’» Autor

**[Gustavo Morales](https://github.com/GAMR11)**

- GitHub: [@GAMR11](https://github.com/GAMR11)
- LinkedIn: [Tu Perfil](https://linkedin.com/in/gustavo-morales-640259221)
- Email: gamr130898@gmail.com

---

## ğŸ“Œ Notas Adicionales

### PrÃ³ximas Mejoras

- [ ] Implementar autenticaciÃ³n JWT
- [ ] Agregar paginaciÃ³n en GET /api/clients
- [ ] Implementar filtros avanzados
- [ ] Agregar Unit Tests
- [ ] Implementar cachÃ© con Redis
- [ ] Agregar rate limiting
- [ ] Dockerizar la aplicaciÃ³n

### Changelog

**v1.0.0** (2025-12-28)
- âœ¨ Release inicial
- âœ… CRUD completo de clientes
- âœ… IntegraciÃ³n con APIs externas
- âœ… DocumentaciÃ³n con Swagger

---

â­ Si este proyecto te fue Ãºtil, dale una estrella en GitHub!
